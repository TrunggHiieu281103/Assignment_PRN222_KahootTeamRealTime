@page
@model KahootTeamRealTime.Pages.QuizRealTime.AnswerQuizModel
@{
    ViewData["Title"] = "Answer Quiz";
}
<h2>Room Code: <span id="roomCode">@Model.RoomCode</span></h2>
<h2>Username: <span id="username">@Model.Username</span></h2>

<div class="quiz-container">
    <h1>Quizzing!</h1>

    @if (!string.IsNullOrEmpty(Model.Question))
    {
        <h3>@Model.Question</h3>
        <p><strong>Question:</strong> @Model.QuestionIndex / @Model.TotalQuestions</p> <!-- Hiển thị số câu hỏi -->

        <div class="timer">@Model.TimeLeft</div> <!-- Hiển thị thời gian còn lại -->

        <form method="post" class="quiz-form" id="quizForm">
            <input type="hidden" name="roomCode" value="@Model.RoomCode" />
            <input type="hidden" name="username" value="@Model.Username" />
            <input type="hidden" name="questionIndex" value="@Model.QuestionIndex" id="questionIndex" />

            @foreach (var answer in Model.Answers)
            {
                <label class="answer-option">
                    <input type="radio" name="SelectedAnswer" value="@answer.Id" required>
                    <span>@answer.Content</span>
                </label>
            }

            <button type="submit" class="submit-btn" >Submit</button>
        </form>

        <div id="resultMessage" class="hidden"></div> <!-- Hiển thị kết quả -->
    }
    else
    {
        <p>No questions available.</p>
    }
</div>

<link rel="stylesheet" href="~/css/quiz.css">

<script>
    let timeLeft = @Model.TimeLeft;
    let timerElement = document.querySelector('.timer');

    function updateTimer() {
        if (timeLeft > 0) {
            timeLeft--;
            timerElement.innerText = timeLeft;
        } else {
            document.getElementById("quizForm").submit();
        }
    }

    setInterval(updateTimer, 1000);
</script>